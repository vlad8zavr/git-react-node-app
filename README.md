# git-react-node-app

## Содержание

1. [Установка](#установка)
2. [Запуск](#запуск)
3. [Краткий обзор работы с приложением](#краткий-обзор-работы-с-приложением)
4. [Структура приложения](#структура-приложения)
5. [Почему не реализовано отображение дополнительной информации](#почему-не-реализовано-отображение-дополнительной-информации)

## TO DO

1. **Header - отображение репозиториев при наведении и их переключение**
2. **lazy loading для файлов (+ спиннер)**
3. **Подсветка синтаксиса для файлов ??? (разбор по словам строки в компоненте RedactorLine)**
4. **Размер файла ??? в компоненте RedactorHead**

## Установка

**node version 10.16.3**

0. необходимо установить пакет **`yarn`** , если он не установлен на устройстве

**инструкция по установке yarn** https://yarnpkg.com/en/docs/install#windows-stable

1. `npm i nodemon -g`

2. `git clone https://github.com/vlad8zavr/git-react-node-app.git`
3. `cd ./git-react-node-app`
4. `npm i`
5. `cd ./client`
6. `npm i`
7. `cd ../`

8. Для сервера нужны пакеты `express` и `fs-extra`

(
    `npm i express`
    `npm i fs-extra`
)

## Запуск

Чтобы одновременно запустить клиента и сервер с указанным репозиторием в качестве аргумента, необходимо 

1. в одной консоли запустить сервер

### `yarn run server <path to repo>`

(Например, `yarn run server ../`)

2. в другой консоли запустить клиент

### `yarn run client`

после чего откроется окно браузера с запущенным приложением по адресу

http://localhost:3000/api/repos

## Краткий обзор работы с приложением

1. При запуске приложения появится экран следующего вида. Далее пользователь может выбрать репозиторий и просмотреть его содержимое при клике на соответсвующий блок.

`(/screenshots/page-1.png)`

![page-1](/screenshots/page-1.png)

2. В приложении пользователь может перемещаться по репозиторию. Сверху доступна информация, в каком именно месте сейчас находится пользователь. Любой из представленных блоков является ссылкой, при клике на которую пользователь перейдет на соответсвующую страницу.

`(/screenshots/page-2.png)`

![page-2](/screenshots/page-2.png)

3. Также пользователю доступен просмотр содержимого конктретного файла. Содержимое показывается при клике на соответствующий файл. Помимо этого, пользователь в любой момент может вернуться на главную страницу, кликнув на логотип в левом верхнем углу.

`(/screenshots/page-3.png)`

![page-3](/screenshots/page-3.png)

## Структура приложения

Приложение разделено на 2 логические части

1. Сервер
2. Клиент

Код сервера находится в файле `server.js` в корне и в папке `./serverUtils`

Код клиента находится в папке `./client`

**Сервер**
```
./git-react-client-app
    |
    --server.js
    |
    --serverUtils/
        |
        --controllers/controllers.js
        |
        --parseResponse/parseResponse.js
```

**Клиент**
```
./git-react-client-app
    |
    --client/
        |
        --src/
            |
            --App.js
            |
            --pages/
            |   |
            |   --PageStart/PageStart.js
            |   |
            |   --PageCurrentRepo/PageCurrentRepo.js
            |   |
            |   --PageFile/PageFile.js
            |
            --assets
            |   |
            |   --assets.scss
            |   |
            |   --color/color.scss
            |   |
            |   --font/font.scss
            |   |
            |   --reused/reused.scss
            |
            --components/
```

**components**
```
components/
    |
    --Header/Header.js
    |
    --Footer/Footer.js
    |
    --Main/Main.js
    |
    --contents/
        |
        --CurrentPath/CurrentPath.js
        |
        --CurrentInfo/CurrentInfo.js
        |
        --MainMenu/MainMenu.js
        |
        --RepoList/RepoList.js
        |
        --ListItem/ListItem.js
        |
        --Redactor/
            |
            --Redactor.js
            |
            --RedactorHead/RedactorHead.js
            |
            --RedactorBody/RedactorBody.js
            |
            --RedactorLine/RedactorLine.js
```

## Почему не реализовано отображение дополнительной информации

При попытках получить подробную информацию о содержимом репозитория (название комита, хэш, дата изменения и комиттер) я не нашел решения, которое бы укладывалось в одной команде. Но я смог реализовать скрипт на **bash**, который выводит всю необходимую информацию.

```bash
#!/bin/bash
for i in *; do
    str=$(git log -1 --pretty=format:"%h <><><> %s ||| %cn <><><> %cr %x09" $i)
    printf "%s -- %s\n" "$i" "$str"
done
```

К сожалению, данный подход не позволяет получить ключевую информацию о том, является ли очередной просматриваемый объект файлом или папкой.

Поэтому я принял решение реализовать вариант приложения без подробной информации о содержимом репозитория.
